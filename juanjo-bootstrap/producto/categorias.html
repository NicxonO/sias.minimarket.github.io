<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Página de Categorías - JuanjoSuper</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
</head>

<body class="bg-light">
    <header>
        <nav class="navbar navbar-expand-lg navbar-light bg-warning">
            <div class="container">
                <a href="../inicio.html" class="navbar-brand">
                    <img src="../../imagenes/logoBN-noback.png" alt="" class="img-fluid" style="max-width: 65px;">
                </a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                    data-bs-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false"
                    aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNavDropdown">
                    <ul class="navbar-nav ml-auto">
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
                                aria-expanded="false">
                                Productos
                            </a>
                            <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                                <a class="dropdown-item" href="inicio-producto.html">Productos inicio</a>
                                <a class="dropdown-item" href="registro.html">Registro</a>
                                <a class="dropdown-item" href="inventario.html">Inventario</a>
                                <a class="dropdown-item active" href="#">Categorías</a>
                                <a class="dropdown-item" href="proveedores.html">Proveedores</a>
                            </div>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                Ventas
                            </a>
                            <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                                <a class="dropdown-item" href="../ventas/inicio-ventas.html">Ventas inicio</a>
                                <a class="dropdown-item" href="../ventas/creacion-venta.html">Creación</a>
                                <a class="dropdown-item" href="../ventas/listado-venta.html">Listado</a>
                            </div>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                Usuarios
                            </a>
                            <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                                <a class="dropdown-item" href="../usuarios/inicio-usuarios.html">Usuarios inicio</a>
                                <a class="dropdown-item" href="../usuarios/creacion-usuarios.html">Registro</a>
                                <a class="dropdown-item" href="../usuarios/listado-usuarios.html">Listado</a>
                            </div>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="../reportes/inicio-reportes.html">Reportes</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="../iniciar-sesion.html">Cerrar Sesión</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>
    <main class="container mt-5">
        <h3>Categorías</h3>

        <div class="input-group mb-3">
            <span class="input-group-text" id="buscar-addon"><i>Buscar</i></span>
            <input type="text" class="form-control" id="buscar" placeholder="Buscar Categoría"
                aria-label="Buscar Categoría" aria-describedby="buscar-addon">
        </div>

        <ul class="list-group" id="lista-categorias">
        </ul>

        <div class="modal fade" id="modal-categoria" tabindex="-1" aria-labelledby="exampleModalLabel"
            aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel">Información de la Categoría</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <p id="nombre-categoria-modal"></p>
                        <p id="descripcion-categoria-modal"></p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                        <button type="button" class="btn btn-primary" id="editarCategoriaBtn">Editar</button>
                        <button type="button" class="btn btn-danger" id="eliminarCategoriaBtn">Eliminar</button>
                    </div>
                </div>
            </div>
        </div>

        <button class="btn btn-primary mt-3 mb-3" type="button" data-bs-toggle="offcanvas"
            data-bs-target="#offcanvasScrolling" aria-controls="offcanvasScrolling">Agregar categoría</button>

        <div class="offcanvas offcanvas-end" data-bs-scroll="true" data-bs-backdrop="false" tabindex="12"
            id="offcanvasScrolling" aria-labelledby="offcanvasScrollingLabel">
            <div class="offcanvas-header">
                <h5 class="offcanvas-title" id="offcanvasScrollingLabel">Creación de Categoría</h5>
                <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
            </div>
            <div class="offcanvas-body">
                <div class="row">
                    <form class="col-md-6">
                        <div class="mb-3">
                            <label for="nombre" class="form-label">Nombre de la Categoría</label>
                            <input type="text" class="form-control" id="nombre" required>
                        </div>
                        <div class="mb-3">
                            <label for="descripcion" class="form-label">Descripción</label>
                            <input type="text" class="form-control" id="descripcion" required>
                        </div>
                        <div class="mb-3">
                            <button type="button" class="btn btn-primary m-1" id="guardar"
                                onclick="guardarCategoria()">Guardar</button>
                            <button type="button" class="btn btn-secondary m-1" id="cancelar"
                                onclick="limpiarFormulario()">Cancelar</button>
                            <button type="button" class="btn btn-secondary m-1" id="reestablecer"
                                onclick="limpiarFormulario()">Reestablecer</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </main>

    <footer class="py-4 bg-warning" style="position: absolute; bottom: 0; width: 100%;">
        <div class="container">
            <div class="row">
                <div class="col text-center">
                    <p>&copy; 2023 Nuestra Página. Todos los derechos reservados.</p>
                </div>
            </div>
        </div>
    </footer>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm"
        crossorigin="anonymous"></script>
    <script>
        var categorias = [
            {
                nombre: "Carnes",
                descripcion: "Productos cárnicos, como carne de res, pollo, cerdo, etc."
            },
            {
                nombre: "Lácteos",
                descripcion: "Productos lácteos, como leche, queso, yogur, etc."
            },
            {
                nombre: "Frutas",
                descripcion: "Diversas frutas frescas, como manzanas, plátanos, naranjas, etc."
            },
            {
                nombre: "Verduras",
                descripcion: "Variedad de verduras frescas, como tomates, lechugas, zanahorias, etc."
            },
            {
                nombre: "Panes y Cereales",
                descripcion: "Productos de panadería y cereales, como pan, arroz, pasta, etc."
            },
            {
                nombre: "Conservas",
                descripcion: "Alimentos enlatados y en conserva, como atún, sardinas, etc."
            },
            {
                nombre: "Bebidas",
                descripcion: "Bebidas no alcohólicas, como agua, jugos, gaseosas, etc."
            },
            {
                nombre: "Higiene Personal",
                descripcion: "Productos de higiene personal, como jabón, champú, papel higiénico, etc."
            },
            {
                nombre: "Productos de Limpieza",
                descripcion: "Productos de limpieza para el hogar, como detergente, desinfectante, etc."
            },
            {
                nombre: "Aseo del Hogar",
                descripcion: "Artículos para el aseo y cuidado del hogar, como escobas, trapeadores, etc."
            },
            {
                nombre: "Café y Té",
                descripcion: "Productos para preparar café y té, como café molido, bolsitas de té, etc."
            }
        ];


        function mostrarListaCategorias() {
            var listaCategorias = document.getElementById('lista-categorias');
            listaCategorias.innerHTML = '';

            var filtro = document.getElementById('buscar').value.toLowerCase();
            var categoriasFiltradas = categorias.filter(function (categoria) {
                return categoria.nombre.toLowerCase().includes(filtro);
            });

            categoriasFiltradas.forEach(function (categoria) {
                var li = document.createElement('li');
                li.className = 'list-group-item';
                li.textContent = categoria.nombre;
                listaCategorias.appendChild(li);

                li.addEventListener('click', function () {
                    mostrarInformacionCategoria(categoria);
                });
            });
        }

        function mostrarInformacionCategoria(categoria) {
            var modalNombre = document.getElementById('nombre-categoria-modal');
            var modalDescripcion = document.getElementById('descripcion-categoria-modal');

            modalNombre.textContent = "Nombre: " + categoria.nombre;
            modalDescripcion.textContent = "Descripción: " + categoria.descripcion;

            var modal = new bootstrap.Modal(document.getElementById('modal-categoria'));
            modal.show();
        }

        var buscarInput = document.getElementById('buscar');
        buscarInput.addEventListener('input', mostrarListaCategorias);

        mostrarListaCategorias();
        function guardarCategoria() {
            var nombre = document.getElementById('nombre').value;
            var descripcion = document.getElementById('descripcion').value;

            if (nombre == '' || descripcion == '') {
                alert("Hay campos sin información en el formulario de registro, por favor completarlos previo a guardado.");
            } else {
                // Crear un objeto de categoría con los datos del formulario
                var nuevaCategoria = {
                    nombre: nombre,
                    descripcion: descripcion
                };

                // Agregar la nueva categoría a la lista de categorías
                categorias.push(nuevaCategoria);

                limpiarFormulario();

                // Volver a mostrar la lista de categorías actualizada
                mostrarListaCategorias();
            }
        }

        function limpiarFormulario() {
            document.getElementById('nombre').value = '';
            document.getElementById('descripcion').value = '';
        }

        function editarCategoria(categoria) {
            // Obtener el nombre actual de la categoría
            var nombreActual = categoria.nombre;
            var descripcionActual = categoria.descripcion;

            // Solicitar un nuevo nombre al usuario
            var nuevoNombre = prompt('Editar nombre de la categoría:', nombreActual);
            var nuevaDescripcion = prompt('Editar descripción de la categoría:', descripcionActual);

            // Verificar si el usuario proporcionó un nuevo nombre y no canceló
            if (nuevoNombre !== '') {
                // Actualizar el nombre de la categoría en la lista
                categoria.nombre = nuevoNombre;

                // Actualizar la información en el modal
                var modalNombre = document.getElementById('nombre-categoria-modal');
                modalNombre.textContent = 'Nombre: ' + nuevoNombre;
            }
            if (nuevaDescripcion !== '') {
                // Actualizar la descripción de la categoría en la lista
                categoria.descripcion = nuevaDescripcion;

                // Actualizar la información en el modal
                var modalDescripcion = document.getElementById('descripcion-categoria-modal');
                modalDescripcion.textContent = 'Descripción: ' + nuevaDescripcion;
            }
            mostrarListaCategorias();
        }

        // Función para eliminar una categoría
        function eliminarCategoria(categoria) {
            var confirmacion = confirm('¿Estás seguro de que deseas eliminar la categoría ' + categoria.nombre + '?');
            if (confirmacion) {
                // Eliminar la categoría de la lista
                var indice = categorias.indexOf(categoria);
                if (indice !== -1) {
                    categorias.splice(indice, 1);
                    mostrarListaCategorias(); // Actualizar la lista de categorías
                }
                $('#modal-categoria').modal('hide'); // Ocultar el modal después de eliminar
            }
        }

        // Obtener los botones del modal
        var editarCategoriaBtn = document.getElementById('editarCategoriaBtn');
        var eliminarCategoriaBtn = document.getElementById('eliminarCategoriaBtn');

        // Agregar evento click al botón "Editar" en el modal
        editarCategoriaBtn.addEventListener('click', function () {
            var nombre = document.getElementById('nombre-categoria-modal').textContent;
            var categoria = categorias.find(function (c) {
                return c.nombre === nombre.split(': ')[1]; // Obtener el nombre de la categoría
            });
            editarCategoria(categoria);
        });

        // Agregar evento click al botón "Eliminar" en el modal
        eliminarCategoriaBtn.addEventListener('click', function () {
            var nombre = document.getElementById('nombre-categoria-modal').textContent;
            var categoria = categorias.find(function (c) {
                return c.nombre === nombre.split(': ')[1]; // Obtener el nombre de la categoría
            });
            eliminarCategoria(categoria);
        });
    </script>
</body>

</html>